<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="card">

<h2>Dashboard</h2>

<p id="userEmail"></p>

<div id="details"></div>

<button onclick="window.location='registration.html'">
Complete Registration
</button>

<button onclick="logout()">Logout</button>

</div>



<script type="module">

import { initializeApp }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";

import { getAuth, onAuthStateChanged, signOut }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";


const firebaseConfig = {
  apiKey: "AIzaSyDFZLqKmwGfJ2Q9HZUDzsLW5MQo7pv1YSY",
  authDomain: "c-competition-portal.firebaseapp.com",
  projectId: "c-competition-portal",
  appId: "1:242421140127:web:8e2dc9023bf8c5ec3530aa"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);


onAuthStateChanged(auth, user=>{
  if(!user) window.location="competition.html";

  document.getElementById("userEmail").innerText =
  "Logged in as: " + user.email;


  /* show saved registration */
  let data = localStorage.getItem("regData");

  if(data){
    data = JSON.parse(data);

    document.getElementById("details").innerHTML =
    `
    <h3>Registered Details</h3>
    Name: ${data.name}<br>
    Mobile: ${data.mobile}<br>
    College: ${data.college}
    `;
  }
});


window.logout = ()=> signOut(auth).then(()=>{
  window.location="competition.html";
});

</script>

</body>
</html>